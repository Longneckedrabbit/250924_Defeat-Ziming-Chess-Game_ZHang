# 象棋AI学习系统

一个专门学习和模仿张子鸣棋路的中国象棋AI系统，能够从对弈中不断学习和进步，直到打败张子鸣。

## 🎯 项目目标

- **初始阶段**: AI只有小白水平的下棋能力
- **学习过程**: 通过与张子鸣对弈，学习其棋路、战术和思维方式
- **最终目标**: AI能够超越张子鸣的水平

## 🚀 核心功能

### ✅ 已完成功能

1. **完整的象棋游戏架构**
   - 基于Flask的Web界面
   - 实时对战功能
   - 完整的中国象棋规则实现

2. **智能AI系统**
   - 多难度等级（小白→初学者→业余→中级→高级→大师）
   - 基础评估算法
   - 随机和策略性移动选择

3. **深度学习模型**
   - 模式识别系统
   - 神经网络架构（支持TensorFlow/PyTorch/简化版）
   - 棋路学习和预测
   - 位置偏好分析

4. **游戏日志系统**
   - 详细记录每步棋和思考过程
   - AI学习事件记录
   - 模式发现和总结
   - 游戏历史回溯

5. **学习进化系统**
   - 实时学习张子鸣的棋路
   - 开局模式识别
   - 战术模式分析
   - 位置偏好学习
   - 策略权重动态调整

6. **数据持久化**
   - 学习模式保存
   - 游戏历史存储
   - AI进度记录
   - 日志导出功能

### 🔧 正在开发

- Web部署配置
- 进度追踪系统UI

## 📦 安装和运行

### 环境要求

- Python 3.8+
- pip包管理器
- 可选：Docker（用于部署）

### 快速开始

1. **克隆项目**
```bash
git clone <repository-url>
cd 12.打败子鸣的象棋游戏
```

2. **安装依赖**
```bash
pip install -r requirements.txt
```

3. **运行游戏**
```bash
python run.py
```

4. **访问游戏**
打开浏览器访问: `http://localhost:5000`

### Docker部署

1. **生成部署文件**
```bash
python deploy.py
```

2. **启动服务**
```bash
./deploy.sh
```

3. **访问网站**
访问: `https://longneckedrabbit.dpdns.org`

## 🎮 游戏说明

### 基本操作

1. **开始游戏**: 点击"新游戏"按钮
2. **移动棋子**: 点击己方棋子选中，再点击目标位置
3. **查看AI思考**: AI移动时会显示思考过程
4. **学习进度**: 实时查看AI的学习统计

### AI学习机制

#### 学习阶段

1. **小白阶段** (0-50局)
   - 完全随机移动
   - 基础规则学习

2. **初学者阶段** (50-100局)
   - 优先吃子策略
   - 简单位置评估

3. **业余阶段** (100-200局)
   - 基础模式识别
   - 简单神经网络预测

4. **中级阶段** (200-500局)
   - 深度模式分析
   - 战术学习

5. **高级阶段** (500-1000局)
   - 复杂策略应用
   - 预测性移动

6. **大师阶段** (1000+局)
   - 全面超越人类
   - 自主创新策略

#### 学习内容

- **开局模式**: 学习常见的开局套路
- **战术组合**: 识别连续战术模式
- **位置偏好**: 分析特定棋子的位置选择
- **应对策略**: 针对特定棋路的防守和进攻

## 📊 学习统计

### 可查看的数据

- **总对局数**: AI参与的游戏数量
- **胜率统计**: AIvs张子鸣的胜负记录
- **学习模式数**: 识别到的模式总数
- **AI等级**: 当前AI的水平阶段
- **思考深度**: AI分析的复杂度
- **改进建议**: 基于分析的改进方向

### 数据导出

```python
# 导出学习日志
POST /api/learning/export

# 获取学习统计
GET /api/learning/stats

# 获取详细进度
GET /api/learning/progress

# 获取学习模式
GET /api/learning/patterns
```

## 🧠 深度学习架构

### 模型结构

```
输入层 (7x10x9)  # 7种棋子 × 10×9棋盘
    ↓
卷积层1 (64 filters, 3x3)
    ↓
批归一化
    ↓
卷积层2 (128 filters, 3x3)
    ↓
批归一化
    ↓
池化层 (2x2)
    ↓
展平
    ↓
全连接层 (512)
    ↓
Dropout (0.3)
    ↓
全连接层 (256)
    ↓
Dropout (0.3)
    ↓
输出层 (8100)  # 10×9×10×9移动概率
```

### 支持框架

- **TensorFlow** (推荐): 完整的深度学习支持
- **PyTorch**: 替代深度学习框架
- **NumPy**: 简化版神经网络实现

## 🌐 Web部署

### 域名配置

- **主域名**: `longneckedrabbit.dpdns.org`
- **端口**: 80 (HTTP), 443 (HTTPS)
- **协议**: HTTPS with SSL/TLS

### 部署架构

```
用户请求 → Nginx → Gunicorn → Flask应用
                ↓
             SSL/TLS
                ↓
            Docker容器
```

### 生产环境配置

1. **SSL证书**
   - 推荐使用Let's Encrypt免费证书
   - 或购买商业SSL证书

2. **反向代理**
   - Nginx处理静态文件
   - 负载均衡和HTTPS

3. **进程管理**
   - Gunicorn WSGI服务器
   - SystemD服务管理

## 🔧 API文档

### 游戏控制

```python
# 开始新游戏
POST /api/game/start
返回: {status: 'success', game_id: 'xxx', game_state: {...}}

# 执行移动
POST /api/game/move
参数: {from: "row,col", to: "row,col"}
返回: {status: 'success', ai_move: {...}, game_state: {...}}
```

### 学习数据

```python
# 获取统计
GET /api/learning/stats
返回: {games_played: 0, wins: 0, losses: 0, ...}

# 获取历史
GET /api/game/history?limit=10
返回: {history: [...]}

# 导出数据
POST /api/learning/export
返回: {status: 'success', files: {...}}
```

## 📈 学习进度追踪

### 进度指标

1. **模式学习进度**
   - 开局模式: 0/100
   - 战术模式: 0/500
   - 位置偏好: 0/200

2. **AI能力评估**
   - 棋力等级: 小白→大师
   - 预测准确率: 0%→100%
   - 策略复杂度: 简单→复杂

3. **对战表现**
   - 胜率曲线
   - 平均思考时间
   - 学习效率

## 🛠️ 开发说明

### 项目结构

```
/
├── app.py                 # 主应用文件
├── chess_rules.py         # 象棋规则引擎
├── game_logger.py         # 游戏日志系统
├── deep_learning_model.py # 深度学习模型
├── run.py               # 启动脚本
├── deploy.py            # 部署配置
├── templates/
│   └── index.html       # 游戏界面
├── logs/               # 日志目录
├── data/               # 数据目录
├── static/             # 静态文件
└── requirements.txt     # 依赖包列表
```

### 扩展开发

1. **添加新AI策略**
   - 修改 `BasicAI.get_move()`
   - 在 `LearningSystem` 中添加相应学习逻辑

2. **增强学习模型**
   - 扩展 `PatternRecognitionModel`
   - 添加新的神经网络架构

3. **自定义评估函数**
   - 修改 `ChessRules.evaluate_board()`
   - 调整位置评分表

## 🤝 贡献指南

欢迎贡献代码、报告问题或提出改进建议！

### 开发流程

1. Fork项目
2. 创建特性分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

### 代码规范

- 遵循PEP 8规范
- 添加详细的注释
- 编写测试用例
- 确保功能完整

## 📝 更新日志

### v1.0.0 (开发中)
- ✅ 完整的象棋游戏实现
- ✅ 基础AI系统
- ✅ 深度学习模型架构
- ✅ 学习和日志系统
- 🔄 Web部署配置
- 🔄 进度追踪UI

### 计划中的功能
- [ ] 移动建议系统
- [ ] 残局分析
- [ ] 多人对战模式
- [ ] 移动端适配
- [ ] 国际象棋支持

## 📞 支持与联系

如有问题或建议，请通过以下方式联系：

- 项目Issues: [GitHub Issues]
- 邮件支持: [联系邮箱]
- 文档: [项目Wiki]

---

**最后更新**: 2024年
**版本**: v1.0.0 开发版